var Journal=function(){function e(){return s=[],localStorage.setItem("Journal-Loggers",[]),i("warn"),"warn"}function n(e){var n,i,o;return s.forEach(function(r){if(r.function){if(r.function!==e.function)return;r.file&&r.file===e.file?n=r:i=r}else if(r.file){if(r.file!==e.file)return;o=r}}),n||i||o||{level:a}}function i(e,n,i){if("debug"!==e&&"info"!==e&&"warn"!==e&&"error"!==e&&"off"!==e)return f.error(e,"is not a valid log level."),null;if(n||i){var o={function:n,file:i,level:e},r=!0;for(var t in s)if(s[t].function===o.function&&s[t].file===o.file){s[t].level=o.level,r=!1;break}r&&s.push(o),localStorage.setItem("Journal-Loggers",JSON.stringify(s))}else localStorage.setItem("Journal-Level",e),a=e;return e}function o(){var e={},n={};Error.captureStackTrace(n,o);var i=n.stack.substr(n.stack.indexOf("at",n.stack.indexOf("at")+1)),r=i.indexOf("\n");return r>-1&&(i=i.substr(0,r)),i.indexOf("(")>-1&&(e.function=i.substr(i.indexOf("at ")+3,i.indexOf(" (")-3)),i=i.substr(i.lastIndexOf("/")+1),e.line=i.substr(i.indexOf(":")+1,i.lastIndexOf(":")-i.indexOf(":")-1),e.file=i.indexOf(".js")>-1?i.substr(0,i.indexOf(".js")+3):i.substr(0,i.indexOf(".html")+5),e}function r(e){var i=n(e),o={debug:!1,info:!1,warn:!1,error:!1};return"debug"===i.level?o.error=o.warn=o.info=o.debug=!0:"info"===i.level?o.error=o.warn=o.info=!0:"warn"===i.level?o.error=o.warn=!0:"error"===i.level?o.error=!0:i.level,o[e.level]}function t(e){return function(){if(arguments&&0!==arguments.length){var n=o();if(n.level=e,c.push({ident:n,arguments:arguments}),r(n)){var t=Array.prototype.slice.call(arguments),l="@ "+(n.function?n.function+"() in ":"")+n.file+":"+n.line;t.push(l),f[e].apply(console,t)}}else i(e)}}function l(e){var n=document.getElementsByTagName("body")[0],i=n.currentStyle||window.getComputedStyle(n);if(void 0!==e){var o=document.createElement("div");return o.style="font-family: Verdana, Arial, Helvetica, sans-serif; position: absolute; top: -"+i.marginTop+"; left: -"+i.marginLeft+"; overflow-y:auto; background: #E0E0E0; padding: 50px; z-index: 100; width: "+(window.innerWidth-100)+"px; height: "+(window.innerHeight-100)+"px",o.id="journalobjview",document.getElementsByTagName("body")[0].appendChild(o),o.innerHTML="<pre>"+JSON.stringify(u[e],null,2)+"</pre>",o.innerHTML+="<div id='closejournalobject' style='border: 2px solid black; z-index: 101; background: white; cursor: pointer; position: absolute; top: 25px; right: 25px; padding: 5px'>X</div>",void(document.getElementById("closejournalobject").onclick=function(){document.getElementsByTagName("body")[0].removeChild(o)})}var r=document.createElement("div");r.style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 11px; position: absolute; top: -"+i.marginTop+"; left: -"+i.marginLeft+"; overflow-y:auto; background: #E0E0E0; padding: 50px; z-index: 98; width: "+(window.innerWidth-100)+"px; height: "+(window.innerHeight-100)+"px",r.id="journalview",document.getElementsByTagName("body")[0].appendChild(r),r.innerHTML+="<h1>Journal Logger System v"+d+"</h1>",r.innerHTML+="<div><div style='width: 100px; display: inline-block'><strong>Level</strong></div><div style='width: 150px; display: inline-block'><strong>File</strong></div><div style='width: 200px; display: inline-block'><strong>Function</strong></div><div style='width: "+(window.innerWidth-600)+"px; display: inline-block'><strong>Message</strong></div></div>";for(var t in c){var l="<div style='background: "+("error"===c[t].ident.level?"#FFE0E0":"warn"===c[t].ident.level?"#FFFFE0":"#F9F9F9")+"'><div style='width: 100px; display: inline-block'>"+c[t].ident.level.toUpperCase()+"</div><div style='width: 150px; display: inline-block'>"+c[t].ident.file+":"+c[t].ident.line+"</div><div style='width: 200px; display: inline-block'>"+(c[t].ident.function?c[t].ident.function:"")+"</div><div style='width: "+(window.innerWidth-600)+"px; display: inline-block'>";for(var a in c[t].arguments)"object"==typeof c[t].arguments[a]?(a>0&&(l+=" "),l+="<div style='display: inline-block; cursor: pointer; color: blue'onclick='Journal.show("+u.length+")'>[object]</div>",u.push(c[t].arguments[a])):(a>0&&(l+=" "),l+=c[t].arguments[a]);l+="</div></div>",r.innerHTML+=l}return r.innerHTML+="<div id='closejournal' style='border: 2px solid black; z-index: 99; background: white; cursor: pointer; position: absolute; top: 25px; right: 25px; padding: 5px'>X</div>",document.getElementById("closejournal").onclick=function(){document.getElementsByTagName("body")[0].removeChild(r)},"Showing Journal"}var d="1.0.5",a=localStorage.getItem("Journal-Level")||"warn",s=JSON.parse(localStorage.getItem("Journal-Loggers"))||[],u=[],c=[],f={debug:console.info.bind(console),info:console.info.bind(console),warn:console.warn.bind(console),error:console.error.bind(console)},g=t("debug"),v=t("info"),p=t("warn"),b=t("error");return console.log=v,console.debug=g,console.info=v,console.warn=p,console.error=b,f.info("Welcome to Journal, current log level:",a),{debug:g,info:v,warn:p,error:b,off:function(){i("off")},log:v,setLevel:i,clearLevels:e,show:l,levels:function(){return s}}}();